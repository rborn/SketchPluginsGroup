!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){var t=e.selection,r=void 0;r=t.count()>0&&(0,m.isSymbol)(t.firstObject())?t.count():P.filterLayers(t).count(),e.panel.callback({count:r})}function o(e){var t=e.selection,r=e.panel,n=t.firstObject(),i=P.filterLayers((0,m.getArray)(n.symbolMaster().layers())),o=r.api().showSelectSymbolOverrideWindow(i.valueForKey("name"));o>-1&&!function(){var r=i.objectAtIndex(o),n=[r.objectID()],a=e.panel.arguments().words,l=a.count(),s=0;(0,m.iterate)(t,function(e){var t=a[s%l];e.addOverrides_forCellAtIndex_ancestorIDs(t,0,n),s+=1})}()}function a(e){var t=e.selection;if(t.count()>0&&(0,m.isSymbol)(t.firstObject()))return o(e);var r=e.command;t=P.filterLayers(t);var n=t.count(),i=e.panel;if(0===n)return void(0,m.showAlert)("Please select text layer...");var a=t.firstObject();if(a.isEditingText())return void(0,m.showAlert)("You need to exit editing mode before using Type plugin.");var l=i.arguments(),s=l.words,u=l.action,c=!1;if(u){r.setValue_forKey_onLayer_forPluginIdentifier(u,"type-duplicate",a,L.DUPLICATE_IDENTIFIER);var f=u.action;if(f)if(f.isEqualToString("article")){var d=u.options;if(d){var S=d.type;S.isEqualToString("body")&&(c=!0)}}else if(f.isEqualToString("khaled")){var p=u.options;p.isEqualToString("article")&&(c=!0)}}s&&!function(){var e=s.count(),r=0;(0,m.iterate)(t,function(t){var n=s[r%e];P.set(t,n,c),c&&P.setFixed(t),r+=1})}()}function l(e,t){var r=e.document,n=e.command,i=O.filterLayers(e.selection),o=i.count(),a=e.panel,l=a.api(),s=a.identifier(),u=a.arguments();u||(u=a.settings()),t||(t=u.mode);var c=u.folder,f=u.link,d=u.category;if(0===o)return void(0,m.showAlert)("Please select layer. Selecting groups is not supported.");var S=M.action.get(r,"MSInsertVectorAction");if(S.isActive())return void(0,m.showAlert)('Please exit the shape "Edit" mode.');var p=i[0],y=void 0;if((0,m.isSymbol)(p)){var g=a.api().resolveAncestorIDsFromSymbol(p);if(!g)return void(0,m.showAlert)("Please select one layer inside the symbol.");g.class()===MSShapeGroup&&g.style().fill().fillType()!==b.FillType.Pattern?(i=NSArray.arrayWithObject(g),p=g):y=NSArray.arrayWithObject(g.objectID())}if(!(0,m.isSymbol)(p)){var v=NSDictionary.dictionaryWithDictionary(u);n.setValue_forKey_onLayer_forPluginIdentifier(v,"photos-duplicate",p,L.DUPLICATE_IDENTIFIER)}if(t.isEqualToString("link")||t.isEqualToString("dropbox")){if(!f)return void(0,m.showAlert)("Please Paste link...");r.showMessage("Downloading image from Dropbox. It may take some time"),y?l.dropbox_selection_ancestorIDs_identifier(f,i,y,s):l.dropbox_selection_identifier(f,i,s)}else if(t.isEqualToString("unsplash"))r.showMessage("Downloading image from Unsplash. It may take some time"),y?l.unsplashWithSelection_ancestorIDs_category_identifier(i,y,d,s):l.unsplashWithSelection_category_identifier(i,d,s);else{if(!c)return void(0,m.showAlert)("Please Select folder...");y?l.imagesFromFolder_applyToLayers_ancestorIDs_identifier(c,i,y,s):l.imagesFromFolder_applyToLayers_identifier(c,i,s)}}function s(e){l(e,NSString.stringWithString("folder"))}function u(e){l(e,NSString.stringWithString("link"))}function c(e){l(e,NSString.stringWithString("unsplash"))}function f(e){var t=e.panel,r=t.arguments(),n=r.initialFolder,i=NSOpenPanel.openPanel();if(i.setCanChooseFiles(!1),i.setCanChooseDirectories(!0),n){var o=NSURL.fileURLWithPath_isDirectory(n,!0);i.setDirectoryURL(o)}if(i.runModal()===NSFileHandlingPanelOKButton){var a=i.URLs().lastObject();t.callback({path:a.path()})}}function d(e){var t=e.panel,r=e.document.currentPage(),n=e.command,i=n.valueForKey_onLayer_forPluginIdentifier("json-files",r,t.identifier());i||(i=JSON.stringify([])),t.callback(i)}function S(e,t,r){var n=e.document.currentPage(),i=e.command,o=e.panel,a=I.createFile(o,i,n,t,r),l=a.file,s=a.files;(0,m.iterate)(e.selection,function(e){I.setMetaData(o.identifier(),i,e,[],l.path,l.name)}),o.callback_forIdentifier(s,"get-json-files"),o.callback_forIdentifier(l,"on-json-change")}function p(e){var t=String(e.panel.arguments()),r=JSON.parse(t);S(e,r.json,r.name)}function y(e){var t=NSOpenPanel.openPanel();if(t.setCanChooseFiles(!0),t.setCanChooseDirectories(!1),t.runModal()===NSFileHandlingPanelOKButton){var r=t.URLs().lastObject(),n=ICUtils.readJSON(r);if(n){var i=r.lastPathComponent();S(e,n,i,!1)}else e.panel.callback({error:!0})}}function g(e){var t=e.panel,r=e.command,n=e.selection,i={paths:{selection:null,repeat:null}};t.callback(i);var o=null,a=!0,l=void 0;(0,m.iterate)(n,function(e){return l=r.valueForKey_onLayer_forPluginIdentifier("json-plugin-data",e,t.identifier()),l&&!a&&o!==l?(l=null,!1):(o=l,void(a=!1))}),l&&t.callback(l)}function v(e){var t=e.command,r=e.panel;(0,m.iterate)(e.selection,function(e){t.setValue_forKey_onLayer_forPluginIdentifier("null","json-plugin-data",e,r.identifier())})}function h(e){var t=e.panel,r=t.api(),n=String(t.arguments()),i=e.command,o=e.selection,a=JSON.parse(n),l=a.firstValue,s=a.values,u=a.paths,c=a.file,f=a.name;if(0!==o.count()){1===o.count()&&(s=[l]);var d=o.firstObject().class()!==MSTextLayer;d?((0,m.iterate)(o,function(e){I.setMetaData(t.identifier(),i,e,u,c,f)}),r.setPlaceholderImageToLayers(o),r.downloadImages_applyToLayers_startIndex_identifier(s,o,0,t.identifier())):!function(){var e=0;(0,m.iterate)(o,function(r){I.setupLayer(t.identifier(),i,r,s[e++%s.length],u,c,f)})}()}}Object.defineProperty(t,"__esModule",{value:!0}),t.textLayersCount=i,t.fillText=a,t.fillPhoto=l,t.fillPhotoFolder=s,t.fillPhotoDropbox=u,t.fillPhotoUnsplash=c,t.openFolderDialog=f,t.getJSONFiles=d,t.newJSONFile=p,t.chooseFile=y,t.jsonUpdateActiveFields=g,t.jsonClearSelectedValue=v,t.jsonSendValues=h;var m=r(1),M=n(m),b=r(9),_=r(10),P=n(_),T=r(11),O=n(T),j=r(12),I=n(j),L=r(13)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){for(var r=e.objectEnumerator(),n=void 0;(n=r.nextObject())&&t(n)!==!1;);}function o(e,t){var r=NSMutableArray.alloc().init();return i(e,function(e){r.addObject(t(e))}),r}function a(e,t){var r=NSMutableArray.alloc().init();return i(e,function(e){t(e)&&r.addObject(e)}),r}function l(e,t){var r=NSPredicate.predicateWithFormat("self isMemberOfClass: %@",t);return e.filteredArrayUsingPredicate(r)}function s(e){return Math.round(100*e)/100}function u(e,t,r){var n=e[t];return void 0===n||null===n?r:n}function c(e){return e.class()===MSSymbolInstance}function f(e){return e.class()===MSSymbolMaster}function d(e){return e.class()===MSTextLayer}function S(e){var t=e.r,r=e.g,n=e.b,i=e.a;return MSColor.colorWithRed_green_blue_alpha(t,r,n,i)}function p(e){return"function"==typeof e.array?e.array():e}Object.defineProperty(t,"__esModule",{value:!0}),t.color=t.action=t.doc=t.page=t.layer=t.pasteboard=t.showConfirm=t.showAlert=void 0,t.iterate=i,t.map=o,t.filter=a,t.filterArrayByClass=l,t.round100=s,t.get=u,t.isSymbol=c,t.isSymbolMaster=f,t.isTextLayer=d,t.rgbaToMSColor=S,t.getArray=p;var y=r(2);Object.defineProperty(t,"showAlert",{enumerable:!0,get:function(){return y.showAlert}}),Object.defineProperty(t,"showConfirm",{enumerable:!0,get:function(){return y.showConfirm}});var g=r(3),v=n(g),h=r(4),m=n(h),M=r(6),b=n(M),_=r(7),P=n(_),T=r(8),O=n(T),j=r(5),I=n(j);t.pasteboard=v,t.layer=m,t.page=b,t.doc=P,t.action=O,t.color=I},function(e,t){"use strict";function r(e){var t=NSAlert.alloc().init();t.setAlertStyle(i.NSWarningAlertStyle),t.setMessageText(e),t.runModal()}function n(e,t){var r=NSAlert.alloc().init();return r.addButtonWithTitle("OK"),r.addButtonWithTitle("Cancel"),r.setInformativeText(t),r.setMessageText(e),r.runModal()===NSAlertFirstButtonReturn}Object.defineProperty(t,"__esModule",{value:!0}),t.showAlert=r,t.showConfirm=n;var i={NSWarningAlertStyle:0,NSInformationalAlertStyle:1,NSCriticalAlertStyle:2}},function(e,t){"use strict";function r(e){var t=NSPasteboard.generalPasteboard();t.declareTypes_owner([NSPasteboardTypeString],null),t.setString_forType(e,NSPasteboardTypeString)}Object.defineProperty(t,"__esModule",{value:!0}),t.writeString=r},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t){t.addLayers(NSArray.arrayWithObject(e))}function o(e,t){var r=NSBezierPath.bezierPathWithRect(e),n=MSShapeGroup.shapeWithBezierPath(r);return i(n,t),"function"==typeof n.embedInShapeGroup&&(n=n.embedInShapeGroup()),n}function a(e){var t=MSTextLayer.alloc().initWithFrame(CGRectMake(0,0,100,100));return t.adjustFrameToFit(),i(t,e),t}function l(e,t){var r=MSLayerGroup.alloc().initWithFrame(e);return i(r,t),r}function s(e,t,r){var n=e.style(),i=n.borders(),o=void 0;o="function"==typeof i.addNewStylePart?i.addNewStylePart():n.addStylePartOfType(1);var a=d.fromString(t);o.setColor(a),o.setPosition(r)}function u(e){e&&e.removeFromParent()}function c(e,t,r){var n=e.userInfo().objectForKey(t);if(n)return n.objectForKey(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.addToGroup=i,t.addRectangleLayerToGroup=o,t.addTextLayerToGroup=a,t.addGroupToGroup=l,t.addBorder=s,t.removeFromParent=u,t.getUserInfoValue=c;var f=r(5),d=n(f)},function(e,t){"use strict";function r(e){if("function"==typeof MSColor.colorWithSVGString)return MSColor.colorWithSVGString(e);var t=MSImmutableColor.colorWithSVGString(e);return MSColor.alloc().initWithImmutableObject(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.fromString=r},function(e,t){"use strict";function r(e,t){for(var r=e.artboards(),n=r.count()-1;n>=0;n--){var i=r[n];if(i.name().isEqualToString(t))return i}}function n(e,t,r){if(e.artboards().count()>r){var n=e.artboards()[r];if(n.name().isEqualToString(t))return n}}function i(e,t,r){var n=MSArtboardGroup.alloc().initWithFrame(r);return e.addLayers([n]),n.setName(t),n}Object.defineProperty(t,"__esModule",{value:!0}),t.getArtboardFromName=r,t.getArtboardFromNameAndIndex=n,t.addArtboard=i},function(e,t){"use strict";function r(e,t){var r=e.addBlankPage();return r.setName(t),e.setCurrentPage(r),r}function n(e,t){for(var r=e.pages(),n=r.count()-1;n>=0;n--){var i=r[n];if(i.name().isEqualToString(t))return i}}function i(e,t){var r=e.currentView();t.setIsSelected(!0),r.zoomToSelection(),t.setIsSelected(!1)}function o(e){var t=e.currentView();"function"==typeof t.actualSizeWithoutAnimating?t.actualSizeWithoutAnimating():t.zoomToActualSizeAnimated(!1),t.animateScrollOriginToPoint(CGPointMake(100,100))}Object.defineProperty(t,"__esModule",{value:!0}),t.addPage=r,t.getPageFromName=n,t.zoomTo=i,t.zoom100Center=o},function(e,t){"use strict";function r(e,t){var r=e.actionsController();return"function"==typeof r.actionWithName?r.actionWithName(t):r.actionWithID(t)}function n(e){var t=r(e,"MSGroupAction");t.group(null);var n=e.selectedLayers(),i=void 0;return i="function"==typeof n.firstObject?n.firstObject():n.firstLayer()}function i(e,t){var n=t.name(),i=r(e,"MSClippingMaskAction");i.clippingMask(null),t.setName(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.get=r,t.groupSelection=n,t.toggleClipping=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FillType={Solid:0,Gradient:1,Pattern:4,Noise:5},t.GradientType={Linear:0,Radial:1,Circular:2},t.PatternFillType={Tile:0,Fill:1},t.NoiseFillType={Original:0,Black:1,White:2,Color:3},t.BorderLineCapsStyle={Butt:0,Round:1,Square:2},t.BorderLineJoinStyle={Miter:0,Round:1,Bevel:2},t.LineDecorationType={None:0,OpenedArrow:1,ClosedArrow:2,Bar:3},t.BlurType={GaussianBlur:0,MotionBlur:1,ZoomBlur:2,BackgroundBlur:3},t.BorderPosition={Center:0,Inside:1,Outside:2,Both:3},t.MaskMode={Outline:0,Alpha:1},t.BooleanOperation={None:-1,Union:0,Subtract:1,Intersect:2,Difference:3},t.ExportOptionsFormat={PNG:"png",JPG:"jpg",TIFF:"tiff",PDF:"pdf",EPS:"eps",SVG:"svg"},t.BlendingMode={Normal:0,Darken:1,Multiply:2,ColorBurn:3,Lighten:4,Screen:5,ColorDodge:6,Overlay:7,SoftLight:8,HardLight:9,Difference:10,Exclusion:11,Hue:12,Saturation:13,Color:14,Luminosity:15},t.TextAlignment={Left:0,Right:1,Center:2,Justified:3},t.TextBehaviour={Auto:0,Fixed:1},t.CurvePointMode={Straight:1,Mirrored:2,Disconnected:4,Asymmetric:3},t.ModelClasses={MSModelObject:"MSModelObject",MSModelBase:"MSModelBase",MSDocumentData:"MSDocumentData",MSLayer:"MSLayer",MSShapeGroup:"MSShapeGroup",MSLayerGroup:"MSLayerGroup",MSPage:"MSPage",MSTextLayer:"MSTextLayer",MSBitmapLayer:"MSBitmapLayer",MSSliceLayer:"MSSliceLayer",MSArtboardGroup:"MSArtboardGroup",MSOvalShape:"MSOvalShape",MSRectangleShape:"MSRectangleShape",MSStarShape:"MSStarShape",MSPolygonShape:"MSPolygonShape",MSTriangleShape:"MSTriangleShape",MSStyle:"MSStyle",MSStyleBorder:"MSStyleBorder",MSStyleFill:"MSStyleFill",MSStyleShadow:"MSStyleShadow",MSStyleInnerShadow:"MSStyleInnerShadow",MSStyleBlur:"MSStyleBlur",MSStyleBorderOptions:"MSStyleBorderOptions",MSStyleColorControls:"MSStyleColorControls",MSStyleReflection:"MSStyleReflection"}},function(e,t,r){"use strict";function n(e){return e.class()===MSTextLayer}function i(e){return(0,s.filter)(e,n)}function o(e,t,r){var n=void 0;r&&(n=e.textAlignment(),e.setTextAlignment(l.TextAlignment.Left)),e.setIsEditingText(!0),e.setStringValue(t),e.setIsEditingText(!1),e.finishEditing(),r&&void 0!==n&&e.setTextAlignment(n)}function a(e){var t=e.parentArtboard();if(t){var r=e.absoluteRect(),n=r.x(),i=r.y(),o=r.width(),a=r.height(),s=t.absoluteRect(),u=s.width()-n+s.x(),c=s.height()-i+s.y(),f=e.rect();o>u&&(f.size.width=u),a>c&&(f.size.height=c),e.setTextBehaviour(l.TextBehaviour.Fixed),e.setHeightIsClipped(!0),e.setRect(f)}}Object.defineProperty(t,"__esModule",{value:!0}),t.filterLayers=i,t.set=o,t.setFixed=a;var l=r(9),s=r(1)},function(e,t,r){"use strict";function n(e){return e.class()!==MSLayerGroup&&e.class()!==MSSliceLayer}function i(e){return(0,o.filter)(e,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.filterLayers=i;var o=r(1)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e,t,r,n,i,o){var a=ICUtils.objectToJSONString({name:o,paths:n,path:i});t.setValue_forKey_onLayer_forPluginIdentifier(a,"json-plugin-data",r,e)}function o(e,t,r,n,o,a,l){i(e,t,r,o,a,l),r.class()===MSTextLayer&&s.set(r,n,!1)}function a(e,t,r,n,i){var o=ICUtils.objectToJSONString(n),a=JSON.parse(t.valueForKey_onLayer_forPluginIdentifier("json-files",r,e.identifier()));a||(a=[]);for(var l=String(o.sha1()),s=!1,u=void 0,c=0;c<a.length;++c){var f=a[c];if(f.hash===l&&String(f.name)===String(i)){s=!0,u=f.path;break}}if(!s){u=String(NSUUID.UUID().UUIDString())+".json";var d=String(e.settingsDocumentsPath())+"/"+u;o.writeToFile_atomically_encoding_error(d,!0,NSUTF8StringEncoding,null),a.push({path:u,name:i,hash:l}),t.setValue_forKey_onLayer_forPluginIdentifier(ICUtils.objectToJSONString(a),"json-files",r,e.identifier())}var S={path:u,name:i,json:n};return{file:S,files:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.setMetaData=i,t.setupLayer=o,t.createFile=a;var l=r(10),s=n(l)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DUPLICATE_IDENTIFIER="com.invisionlabs.duplicate"}])});